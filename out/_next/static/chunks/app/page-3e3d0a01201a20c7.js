(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5949:function(e,t,a){Promise.resolve().then(a.bind(a,8417))},8417:function(e,t,a){"use strict";a.r(t),a.d(t,{LadderbataTimer:function(){return LadderbataTimer}});var s=a(7437),r=a(2265),n=a(7256),l=a(6061),o=a(7042),d=a(4769);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,d.m6)((0,o.W)(t))}let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:o=!1,...d}=e,i=o?n.g7:"button";return(0,s.jsx)(i,{className:cn(c({variant:r,size:l,className:a})),ref:t,...d})});i.displayName="Button";var u=a(4891),m=a(9883),f=a(9633);let Drawer=e=>{let{shouldScaleBackground:t=!0,...a}=e;return(0,s.jsx)(f.dy.Root,{shouldScaleBackground:t,...a})};Drawer.displayName="Drawer",f.dy.Trigger;let x=f.dy.Portal,h=f.dy.Close,p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(f.dy.Overlay,{ref:t,className:cn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",a),...r})});p.displayName=f.dy.Overlay.displayName;let g=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(x,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(f.dy.Content,{ref:t,className:cn("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background p-4",a),...n,children:[(0,s.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]})});g.displayName="DrawerContent";let DrawerHeader=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:cn("grid gap-1.5 p-4 text-center sm:text-left",t),...a})};DrawerHeader.displayName="DrawerHeader";let DrawerFooter=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:cn("mt-auto flex flex-col gap-2 p-4",t),...a})};DrawerFooter.displayName="DrawerFooter";let N=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(f.dy.Title,{ref:t,className:cn("text-lg font-semibold leading-none tracking-tight",a),...r})});N.displayName=f.dy.Title.displayName;let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(f.dy.Description,{ref:t,className:cn("text-sm text-muted-foreground",a),...r})});function RoundSelectionDrawer(e){let{currentRounds:t,onRoundsChange:a,onStart:n,onReset:l,isRunning:o=!1}=e,[d,c]=r.useState(t),[f,x]=r.useState(!0);function onClick(e){let t=Math.max(1,Math.min(20,d+e));c(t)}function handleSubmit(){console.log("Drawer handleSubmit called with rounds:",d),a(d),x(!1),n()}let p=(e=>{let t=0;for(let a=1;a<=e;a++){let e=a,s=t+e,r=s+1;t=r}return t})(d);return(0,s.jsx)(Drawer,{open:f,onOpenChange:()=>{},modal:!1,children:(0,s.jsx)(g,{children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,s.jsxs)(DrawerHeader,{children:[(0,s.jsx)(N,{children:"Round Selection"}),(0,s.jsx)(b,{children:"Set your workout rounds. Each round increases in work duration."})]}),(0,s.jsxs)("div",{className:"p-4 pb-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsxs)(i,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(-1),disabled:d<=1,children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Decrease"})]}),(0,s.jsxs)("div",{className:"flex-1 text-center",children:[(0,s.jsx)("div",{className:"text-7xl font-bold tracking-tighter font-mono",children:d}),(0,s.jsx)("div",{className:"text-muted-foreground text-[0.70rem] uppercase font-mono",children:"Rounds"})]}),(0,s.jsxs)(i,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(1),disabled:d>=20,children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Increase"})]})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground font-mono uppercase mb-1",children:"Total Workout Time"}),(0,s.jsxs)("div",{className:"text-3xl font-bold font-mono",children:[p," minutes"]})]})]}),(0,s.jsxs)(DrawerFooter,{children:[(0,s.jsx)(h,{asChild:!0,children:(0,s.jsx)(i,{onClick:handleSubmit,className:"font-mono",children:"Start Timer"})}),o&&(0,s.jsx)(i,{onClick:()=>window.location.reload(),variant:"destructive",className:"font-mono",children:"Refresh Page"})]})]})})})}b.displayName=f.dy.Description.displayName;var w=a(9370),j=a(3067),v=a(8291);let y=r.createContext(null);function useCarousel(){let e=r.useContext(y);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let R=r.forwardRef((e,t)=>{let{orientation:a="horizontal",opts:n,setApi:l,plugins:o,className:d,children:c,...i}=e,[u,m]=(0,w.Z)({...n,axis:"horizontal"===a?"x":"y"},o),[f,x]=r.useState(!1),[h,p]=r.useState(!1),g=r.useCallback(e=>{e&&(x(e.canScrollPrev()),p(e.canScrollNext()))},[]),N=r.useCallback(()=>{null==m||m.scrollPrev()},[m]),b=r.useCallback(()=>{null==m||m.scrollNext()},[m]),j=r.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),N()):"ArrowRight"===e.key&&(e.preventDefault(),b())},[N,b]);return r.useEffect(()=>{m&&l&&l(m)},[m,l]),r.useEffect(()=>{if(m)return g(m),m.on("reInit",g),m.on("select",g),()=>{null==m||m.off("select",g)}},[m,g]),(0,s.jsx)(y.Provider,{value:{carouselRef:u,api:m,opts:n,orientation:a||((null==n?void 0:n.axis)==="y"?"vertical":"horizontal"),scrollPrev:N,scrollNext:b,canScrollPrev:f,canScrollNext:h},children:(0,s.jsx)("div",{ref:t,onKeyDownCapture:j,className:cn("relative",d),role:"region","aria-roledescription":"carousel",...i,children:c})})});R.displayName="Carousel";let k=r.forwardRef((e,t)=>{let{className:a,...r}=e,{carouselRef:n,orientation:l}=useCarousel();return(0,s.jsx)("div",{ref:n,className:"overflow-hidden",children:(0,s.jsx)("div",{ref:t,className:cn("flex","horizontal"===l?"-ml-4":"-mt-4 flex-col",a),...r})})});k.displayName="CarouselContent";let C=r.forwardRef((e,t)=>{let{className:a,...r}=e,{orientation:n}=useCarousel();return(0,s.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:cn("min-w-0 shrink-0 grow-0 basis-full","horizontal"===n?"pl-4":"pt-4",a),...r})});C.displayName="CarouselItem";let S=r.forwardRef((e,t)=>{let{className:a,variant:r="outline",size:n="icon",...l}=e,{orientation:o,scrollPrev:d,canScrollPrev:c}=useCarousel();return(0,s.jsxs)(i,{ref:t,variant:r,size:n,className:cn("absolute  h-8 w-8 rounded-full","horizontal"===o?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!c,onClick:d,...l,children:[(0,s.jsx)(j.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});S.displayName="CarouselPrevious";let D=r.forwardRef((e,t)=>{let{className:a,variant:r="outline",size:n="icon",...l}=e,{orientation:o,scrollNext:d,canScrollNext:c}=useCarousel();return(0,s.jsxs)(i,{ref:t,variant:r,size:n,className:cn("absolute h-8 w-8 rounded-full","horizontal"===o?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!c,onClick:d,...l,children:[(0,s.jsx)(v.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Next slide"})]})});D.displayName="CarouselNext";let T=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});T.displayName="Card";let E=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:cn("flex flex-col space-y-1.5 p-6",a),...r})});E.displayName="CardHeader";let z=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:cn("text-2xl font-semibold leading-none tracking-tight",a),...r})});z.displayName="CardTitle";let M=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:cn("text-sm text-muted-foreground",a),...r})});M.displayName="CardDescription";let L=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:cn("p-6 pt-0",a),...r})});L.displayName="CardContent";let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:cn("flex items-center p-6 pt-0",a),...r})});O.displayName="CardFooter";var P=a(8520),I=a(2549);let A=P.fC;P.xz;let F=P.h_;P.x8;let Z=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(P.aV,{ref:t,className:cn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});Z.displayName=P.aV.displayName;let _=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(F,{children:[(0,s.jsx)(Z,{}),(0,s.jsxs)(P.VY,{ref:t,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(P.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(I.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});_.displayName=P.VY.displayName;let H=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(P.Dx,{ref:t,className:cn("text-lg font-semibold leading-none tracking-tight",a),...r})});H.displayName=P.Dx.displayName;let K=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(P.dk,{ref:t,className:cn("text-sm text-muted-foreground",a),...r})});K.displayName=P.dk.displayName;var V=a(4551);let W=r.forwardRef((e,t)=>{let{className:a,value:r,...n}=e;return(0,s.jsx)(V.fC,{ref:t,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,s.jsx)(V.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});W.displayName=V.fC.displayName;var U=a(9824);function LadderbataTimer(){let[e,t]=r.useState({targetRounds:3,currentRound:0,phase:"idle",secondsLeft:0,elapsedSeconds:0,phaseStartElapsed:0,elapsedMilliseconds:0}),[a,n]=r.useState([]),[l,o]=r.useState(null),[d,c]=r.useState(null),[u,m]=r.useState(),[f,x]=r.useState(0),[h,p]=r.useState(10),mmss=e=>{let t=Math.floor(e/60).toString().padStart(2,"0"),a=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(a)},clearTimer=()=>{l&&(clearInterval(l),o(null)),d&&(clearInterval(d),c(null))},buildQueue=e=>{let t=[],a=0;for(let s=1;s<=e;s++){let e=a,r=s,n=a+r,l=n+1;t.push({round:s,workStart:e,restStart:n,workMinutes:r,completionTime:l}),a=l}n(t)},reset=()=>{window.location.reload()},complete=()=>{clearTimer(),t(e=>({...e,phase:"done",secondsLeft:0})),n([])},startCountdown=()=>{t(e=>({...e,phase:"countdown",currentRound:1,elapsedSeconds:0})),buildQueue(e.targetRounds),p(10);let a=10,s=setInterval(()=>{p(--a),a<=0&&(clearInterval(s),startMainTimer())},1e3);c(s)},startMainTimer=()=>{let e=Date.now();t(e=>({...e,phase:"work",secondsLeft:60*e.currentRound,phaseStartElapsed:e.elapsedSeconds,elapsedMilliseconds:0}));let a=setInterval(()=>{t(t=>{let a=Date.now(),s=a-e,r=Math.floor(s/1e3),n="work"===t.phase?60*t.currentRound:60,l=r-t.phaseStartElapsed,o=Math.max(0,n-l);if(0===o){if("work"===t.phase)return{...t,elapsedSeconds:r,phase:"rest",secondsLeft:60,phaseStartElapsed:r};if("rest"===t.phase){if(t.currentRound>=t.targetRounds)return complete(),{...t,elapsedSeconds:r,phase:"done",secondsLeft:0};{let e=t.currentRound+1;return{...t,elapsedSeconds:r,currentRound:e,phase:"work",secondsLeft:60*e,phaseStartElapsed:r}}}}return{...t,elapsedSeconds:r,secondsLeft:o,elapsedMilliseconds:s}})},100);o(a)},getPhaseClass=()=>{switch(e.phase){case"work":default:return"text-green-600";case"rest":return"text-red-500";case"done":return"text-gray-900"}},getProgressPercentage=()=>{if("work"===e.phase){let t=60*e.currentRound,a=t-e.secondsLeft;return a/t*100}if("rest"===e.phase){let t=60-e.secondsLeft;return t/60*100}return 0};return(0,s.jsxs)("div",{className:"min-h-screen bg-background p-7",children:[(0,s.jsx)(RoundSelectionDrawer,{currentRounds:e.targetRounds,onRoundsChange:e=>{t(t=>({...t,targetRounds:e}))},onStart:()=>{"idle"===e.phase||"done"===e.phase?startCountdown():reset()},onReset:reset,isRunning:"work"===e.phase||"rest"===e.phase}),(0,s.jsx)(A,{open:"countdown"===e.phase,children:(0,s.jsx)(_,{className:"bg-white border-none max-w-md [&>button]:hidden shadow-none",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,s.jsx)("h1",{className:"text-9xl font-bold text-black font-mono mb-6",children:h}),(0,s.jsx)(W,{value:(10-h)/10*100,className:"w-full h-4 bg-gray-200"})]})})}),"idle"!==e.phase&&"done"!==e.phase&&"countdown"!==e.phase&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("main",{className:"max-w-3xl mx-auto bg-card  rounded-2xl p-0",children:[(0,s.jsx)("header",{className:"flex items-center justify-center mb-6 w-full py-3 rounded-lg",style:(()=>{let t=getProgressPercentage(),a="work"===e.phase?"34, 197, 94":"239, 68, 68";return{background:"linear-gradient(to right, rgba(".concat(a,", 1) ").concat(t,"%, rgba(").concat(a,", 0.3) ").concat(t,"%)")}})(),children:(0,s.jsx)("div",{className:"font-bold text-lg font-mono text-white bg-black p-2",children:"LADDERBATA"})}),(0,s.jsx)("h1",{className:" text-8xl font-bold text-center mb-2 font-mono ".concat(getPhaseClass()),children:(()=>{switch(e.phase){case"idle":default:return"READY";case"work":return"WORK";case"rest":return"REST";case"done":return"COMPLETED"}})()}),(0,s.jsx)("div",{className:"font-mono font-bold text-6xl sm:text-8xl lg:text-9xl mt-2 tabular-nums text-center ".concat(getPhaseClass()),children:mmss(e.secondsLeft)}),(0,s.jsx)("div",{className:"text-center space-y-2 my-4",children:(0,s.jsxs)("div",{className:"font-bold font-mono text-4xl",children:["ROUND: ",e.currentRound," OF ",e.targetRounds]})}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 px-6 py-4 font-mono bg-black",children:[(0,s.jsx)("span",{className:"text-lg font-bold uppercase text-white",children:"Clock Time:"}),(0,s.jsx)("span",{className:"text-lg font-bold tabular-nums text-white",children:(e=>{let t=Math.floor(e/36e5).toString().padStart(2,"0"),a=Math.floor(e%36e5/6e4).toString().padStart(2,"0"),s=Math.floor(e%6e4/1e3).toString().padStart(2,"0"),r=Math.floor(e%1e3/10).toString().padStart(2,"0");return"".concat(t,":").concat(a,":").concat(s,".").concat(r)})(e.elapsedMilliseconds)})]})}),(0,s.jsxs)("div",{className:"text-center text-muted-foreground font-bold font-mono mt-4 text-lg",children:["NEXT ROUND: ",e.currentRound>=e.targetRounds?"â€“":e.currentRound+1," MINUTES OF WORK"]})]}),e.targetRounds>0&&(0,s.jsx)("section",{className:"max-w-3xl mx-auto mt-6",children:(0,s.jsx)(R,{setApi:m,opts:{align:"center",loop:!1,watchDrag:!1},className:"w-full",children:(0,s.jsx)(k,{children:((e,t)=>{let a=[],s=0;for(let r=1;r<=e;r++){let e=s,n=r,l=s+n,o=l+1;r>=t&&a.push({round:r,workStart:e,restStart:l,workMinutes:n,elapsedTimeOnCompletion:o}),s=o}return a})(e.targetRounds,e.currentRound).map((t,a)=>{let r=0===a,n=r?"rest"===e.phase?"bg-red-500":"bg-green-500":"",l=r?"text-white":"";return(0,s.jsx)(C,{className:"md:basis-1/2 lg:basis-1/3",children:(0,s.jsxs)(T,{className:n,children:[(0,s.jsx)(E,{children:(0,s.jsxs)(z,{className:"text-center font-mono text-4xl uppercase ".concat(l),children:["ROUND",(0,s.jsx)("h1",{className:"text-center font-mono text-8xl ".concat(l),children:t.round})]})}),(0,s.jsx)(L,{className:"space-y-2 font-mono",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"font-bold ".concat(l),children:["WORK: ",mmss(60*t.workMinutes)]}),(0,s.jsxs)("div",{className:"font-bold ".concat(l),children:["REST: ",mmss(60)]}),(0,s.jsxs)("div",{className:"font-bold text-sm uppercase tracking-tight mt-4 ".concat(r?"text-white":"text-muted-foreground"),children:["CLOCK TIME: ",mmss(60*t.elapsedTimeOnCompletion)]})]})})]})},t.round)})})})}),(0,s.jsx)("div",{className:"flex justify-center mt-6",children:(0,s.jsxs)(i,{onClick:()=>window.location.reload(),variant:"secondary",className:"bg-muted text-black font-mono font-bold",children:[(0,s.jsx)(U.Z,{className:"mr-2 h-4 w-4 text-black"}),"RESET TIMER"]})})]})]})}}},function(e){e.O(0,[727,971,472,744],function(){return e(e.s=5949)}),_N_E=e.O()}]);