(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5949:function(e,t,r){Promise.resolve().then(r.bind(r,3658))},3658:function(e,t,r){"use strict";r.r(t),r.d(t,{LadderbataTimer:function(){return LadderbataTimer}});var n=r(7437),s=r(2265),a=r(7256),d=r(6061),o=r(7042),l=r(4769);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.m6)((0,o.W)(t))}let i=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:d,asChild:o=!1,...l}=e,c=o?a.g7:"button";return(0,n.jsx)(c,{className:cn(i({variant:s,size:d,className:r})),ref:t,...l})});c.displayName="Button";var u=r(4891),h=r(9883),m=r(5253),x=r(3779),f=r(1399),p=r(9512);let Drawer=e=>{let{shouldScaleBackground:t=!0,...r}=e;return(0,n.jsx)(p.dy.Root,{shouldScaleBackground:t,...r})};Drawer.displayName="Drawer";let b=p.dy.Trigger,g=p.dy.Portal,j=p.dy.Close,N=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(p.dy.Overlay,{ref:t,className:cn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",r),...s})});N.displayName=p.dy.Overlay.displayName;let y=s.forwardRef((e,t)=>{let{className:r,children:s,...a}=e;return(0,n.jsxs)(g,{children:[(0,n.jsx)(N,{}),(0,n.jsxs)(p.dy.Content,{ref:t,className:cn("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background p-4",r),...a,children:[(0,n.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),s]})]})});y.displayName="DrawerContent";let DrawerHeader=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:cn("grid gap-1.5 p-4 text-center sm:text-left",t),...r})};DrawerHeader.displayName="DrawerHeader";let DrawerFooter=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:cn("mt-auto flex flex-col gap-2 p-4",t),...r})};DrawerFooter.displayName="DrawerFooter";let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(p.dy.Title,{ref:t,className:cn("text-lg font-semibold leading-none tracking-tight",r),...s})});v.displayName=p.dy.Title.displayName;let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(p.dy.Description,{ref:t,className:cn("text-sm text-muted-foreground",r),...s})});w.displayName=p.dy.Description.displayName;let S=[{round:1,intensity:100},{round:2,intensity:200},{round:3,intensity:300},{round:4,intensity:400},{round:5,intensity:500},{round:6,intensity:600},{round:7,intensity:700},{round:8,intensity:800},{round:9,intensity:900},{round:10,intensity:1e3},{round:11,intensity:1100},{round:12,intensity:1200},{round:13,intensity:1300}];function RoundSelectionDrawer(e){let{currentRounds:t,onRoundsChange:r,onStart:a}=e,[d,o]=s.useState(t);function onClick(e){let t=Math.max(1,Math.min(20,d+e));o(t)}function handleSubmit(){r(d),a()}let l=S.slice(0,d).map((e,t)=>({...e,intensity:(t+1)*100}));return(0,n.jsxs)(Drawer,{children:[(0,n.jsx)(b,{asChild:!0,children:(0,n.jsxs)(c,{variant:"outline",className:"font-mono",children:[t," Work rounds"]})}),(0,n.jsx)(y,{children:(0,n.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,n.jsxs)(DrawerHeader,{children:[(0,n.jsx)(v,{children:"Round Selection"}),(0,n.jsx)(w,{children:"Set your workout rounds. Each round increases in work duration."})]}),(0,n.jsxs)("div",{className:"p-4 pb-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsxs)(c,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(-1),disabled:d<=1,children:[(0,n.jsx)(u.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Decrease"})]}),(0,n.jsxs)("div",{className:"flex-1 text-center",children:[(0,n.jsx)("div",{className:"text-7xl font-bold tracking-tighter font-mono",children:d}),(0,n.jsx)("div",{className:"text-muted-foreground text-[0.70rem] uppercase font-mono",children:"Rounds"})]}),(0,n.jsxs)(c,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(1),disabled:d>=20,children:[(0,n.jsx)(h.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Increase"})]})]}),(0,n.jsx)("div",{className:"mt-3 h-[120px]",children:(0,n.jsx)(m.h,{width:"100%",height:"100%",children:(0,n.jsx)(x.v,{data:l,children:(0,n.jsx)(f.$,{dataKey:"intensity",style:{fill:"hsl(var(--primary))",opacity:.9}})})})})]}),(0,n.jsxs)(DrawerFooter,{children:[(0,n.jsx)(j,{asChild:!0,children:(0,n.jsx)(c,{onClick:handleSubmit,className:"font-mono",children:"Start Timer"})}),(0,n.jsx)(j,{asChild:!0,children:(0,n.jsx)(c,{variant:"outline",className:"font-mono",children:"Cancel"})})]})]})})]})}function LadderbataTimer(){let[e,t]=s.useState({targetRounds:8,currentRound:0,phase:"idle",secondsLeft:0,elapsedSeconds:0,phaseStartElapsed:0}),[r,a]=s.useState([]),[d,o]=s.useState(null),clearTimer=()=>{d&&(clearInterval(d),o(null))},buildQueue=e=>{let t=[],r=0;for(let n=1;n<=e;n++){let e=r,s=n,a=r+s,d=a+1;t.push({round:n,workStart:e,restStart:a,workMinutes:s,completionTime:d}),r=d}a(t)},popTopRow=()=>{a(e=>e.slice(1))},reset=()=>{clearTimer(),t({targetRounds:e.targetRounds,currentRound:0,phase:"idle",secondsLeft:0,elapsedSeconds:0,phaseStartElapsed:0}),a([])},beginWork=()=>{let r=e.currentRound;t(e=>({...e,phase:"work",secondsLeft:60*r,phaseStartElapsed:e.elapsedSeconds}))},complete=()=>{clearTimer(),t(e=>({...e,phase:"done",secondsLeft:0})),a([])},startFlow=()=>{t(e=>({...e,currentRound:1,elapsedSeconds:0})),buildQueue(e.targetRounds),clearTimer();let r=setInterval(()=>{t(e=>{let t=e.elapsedSeconds+1,r="work"===e.phase?60*e.currentRound:60,n=t-e.phaseStartElapsed,s=Math.max(0,r-n);if(0===s){if("work"===e.phase)return{...e,elapsedSeconds:t,phase:"rest",secondsLeft:60,phaseStartElapsed:t};if("rest"===e.phase){if(popTopRow(),e.currentRound>=e.targetRounds)return complete(),{...e,elapsedSeconds:t,phase:"done",secondsLeft:0};{let r=e.currentRound+1;return{...e,elapsedSeconds:t,currentRound:r,phase:"work",secondsLeft:60*r,phaseStartElapsed:t}}}}return{...e,elapsedSeconds:t,secondsLeft:s}})},1e3);o(r),beginWork()},handleStart=()=>{"idle"===e.phase||"done"===e.phase?startFlow():reset()};return(0,n.jsxs)("div",{className:"min-h-screen bg-background p-7",children:[(0,n.jsxs)("main",{className:"max-w-3xl mx-auto bg-card border rounded-2xl shadow-lg p-6",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("div",{className:"font-bold text-lg font-mono",children:"LADDERBATA"}),(0,n.jsx)("div",{className:"flex items-center gap-3",children:"idle"===e.phase||"done"===e.phase?(0,n.jsx)(RoundSelectionDrawer,{currentRounds:e.targetRounds,onRoundsChange:e=>{t(t=>({...t,targetRounds:e}))},onStart:handleStart}):(0,n.jsx)(c,{onClick:handleStart,variant:"outline",className:"font-mono",children:"Reset"})})]}),(0,n.jsx)("h1",{className:"text-5xl font-bold text-center mb-2 font-mono ".concat((()=>{switch(e.phase){case"work":default:return"text-green-600";case"rest":return"text-red-500";case"done":return"text-gray-900"}})()),children:(()=>{switch(e.phase){case"idle":default:return"READY";case"work":return"WORK";case"rest":return"REST";case"done":return"COMPLETED"}})()}),(0,n.jsxs)("div",{className:"text-center space-y-2 mb-4",children:[(0,n.jsxs)("div",{className:"font-bold font-mono",children:["ROUND: ","idle"===e.phase?"–":e.currentRound," OF ",e.targetRounds||"–"]}),(0,n.jsxs)("div",{className:"font-bold font-mono",children:["CURRENT ROUND: ","idle"===e.phase?"–":e.currentRound," MINUTES OF WORK"]}),(0,n.jsxs)("div",{className:"text-muted-foreground font-bold font-mono",children:["NEXT ROUND: ","idle"===e.phase||e.currentRound>=e.targetRounds?"–":e.currentRound+1," MINUTES OF WORK"]}),(0,n.jsx)("div",{className:"text-muted-foreground font-mono text-6xl mt-2 tabular-nums",children:(e=>{let t=Math.floor(e/60).toString().padStart(2,"0"),r=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)})(e.secondsLeft)})]}),(0,n.jsxs)("div",{className:"text-center text-xl font-mono",children:["TOTAL ELAPSED: ",(0,n.jsx)("span",{className:"text-2xl",children:(e=>{let t=Math.floor(e/3600).toString().padStart(2,"0"),r=Math.floor(e%3600/60).toString().padStart(2,"0"),n=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r,":").concat(n)})(e.elapsedSeconds)})]})]}),r.length>0&&(0,n.jsx)("section",{className:"max-w-3xl mx-auto mt-6",children:(0,n.jsx)("div",{className:"bg-card border rounded-xl overflow-hidden",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"bg-muted/50",children:[(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"Round"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"Work Start"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"Rest Start"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"Work Minutes"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"Elapsed Time on Completion"})]})}),(0,n.jsx)("tbody",{children:r.map((e,t)=>(0,n.jsxs)("tr",{className:0===t?"bg-green-50":"",children:[(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:e.round}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:e.workStart}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:e.restStart}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:e.workMinutes}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:e.completionTime})]},e.round))})]})})})]})}}},function(e){e.O(0,[695,971,472,744],function(){return e(e.s=5949)}),_N_E=e.O()}]);