(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5949:function(e,t,r){Promise.resolve().then(r.bind(r,3658))},3658:function(e,t,r){"use strict";r.r(t),r.d(t,{LadderbataTimer:function(){return LadderbataTimer}});var s=r(7437),n=r(2265),a=r(7256),o=r(6061),d=r(7042),l=r(4769);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.m6)((0,d.W)(t))}let c=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:d=!1,...l}=e,i=d?a.g7:"button";return(0,s.jsx)(i,{className:cn(c({variant:n,size:o,className:r})),ref:t,...l})});i.displayName="Button";var u=r(4891),m=r(9883),h=r(9512);let Drawer=e=>{let{shouldScaleBackground:t=!0,...r}=e;return(0,s.jsx)(h.dy.Root,{shouldScaleBackground:t,...r})};Drawer.displayName="Drawer";let x=h.dy.Trigger,f=h.dy.Portal,p=h.dy.Close,b=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(h.dy.Overlay,{ref:t,className:cn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",r),...n})});b.displayName=h.dy.Overlay.displayName;let g=n.forwardRef((e,t)=>{let{className:r,children:n,...a}=e;return(0,s.jsxs)(f,{children:[(0,s.jsx)(b,{}),(0,s.jsxs)(h.dy.Content,{ref:t,className:cn("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background p-4",r),...a,children:[(0,s.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]})});g.displayName="DrawerContent";let DrawerHeader=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:cn("grid gap-1.5 p-4 text-center sm:text-left",t),...r})};DrawerHeader.displayName="DrawerHeader";let DrawerFooter=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:cn("mt-auto flex flex-col gap-2 p-4",t),...r})};DrawerFooter.displayName="DrawerFooter";let N=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(h.dy.Title,{ref:t,className:cn("text-lg font-semibold leading-none tracking-tight",r),...n})});N.displayName=h.dy.Title.displayName;let j=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(h.dy.Description,{ref:t,className:cn("text-sm text-muted-foreground",r),...n})});function RoundSelectionDrawer(e){let{currentRounds:t,onRoundsChange:r,onStart:a}=e,[o,d]=n.useState(t),[l,c]=n.useState(!1);function onClick(e){let t=Math.max(1,Math.min(20,o+e));d(t)}function handleSubmit(){r(o),a()}let h=(e=>{let t=0;for(let r=1;r<=e;r++)t+=r+1;return t-1})(o);return(0,s.jsxs)(Drawer,{open:l,onOpenChange:c,children:[(0,s.jsx)(x,{asChild:!0,children:(0,s.jsxs)(i,{variant:"outline",className:"font-mono",children:[t," Work rounds"]})}),(0,s.jsx)(g,{children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,s.jsxs)(DrawerHeader,{children:[(0,s.jsx)(N,{children:"Round Selection"}),(0,s.jsx)(j,{children:"Set your workout rounds. Each round increases in work duration."})]}),(0,s.jsxs)("div",{className:"p-4 pb-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsxs)(i,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(-1),disabled:o<=1,children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Decrease"})]}),(0,s.jsxs)("div",{className:"flex-1 text-center",children:[(0,s.jsx)("div",{className:"text-7xl font-bold tracking-tighter font-mono",children:o}),(0,s.jsx)("div",{className:"text-muted-foreground text-[0.70rem] uppercase font-mono",children:"Rounds"})]}),(0,s.jsxs)(i,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(1),disabled:o>=20,children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Increase"})]})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground font-mono uppercase mb-1",children:"Total Workout Time"}),(0,s.jsxs)("div",{className:"text-3xl font-bold font-mono",children:[h," minutes"]})]})]}),(0,s.jsxs)(DrawerFooter,{children:[(0,s.jsx)(p,{asChild:!0,children:(0,s.jsx)(i,{onClick:handleSubmit,className:"font-mono",children:"Start Timer"})}),(0,s.jsx)(p,{asChild:!0,children:(0,s.jsx)(i,{variant:"outline",className:"font-mono",children:"Cancel"})})]})]})})]})}function LadderbataTimer(){let[e,t]=n.useState({targetRounds:8,currentRound:0,phase:"idle",secondsLeft:0,elapsedSeconds:0,phaseStartElapsed:0}),[r,a]=n.useState([]),[o,d]=n.useState(null),clearTimer=()=>{o&&(clearInterval(o),d(null))},buildQueue=e=>{let t=[],r=0;for(let s=1;s<=e;s++){let e=r,n=s,a=r+n,o=a+1;t.push({round:s,workStart:e,restStart:a,workMinutes:n,completionTime:o}),r=o}a(t)},popTopRow=()=>{a(e=>e.slice(1))},reset=()=>{clearTimer(),t({targetRounds:e.targetRounds,currentRound:0,phase:"idle",secondsLeft:0,elapsedSeconds:0,phaseStartElapsed:0}),a([])},beginWork=()=>{let r=e.currentRound;t(e=>({...e,phase:"work",secondsLeft:60*r,phaseStartElapsed:e.elapsedSeconds}))},complete=()=>{clearTimer(),t(e=>({...e,phase:"done",secondsLeft:0})),a([])},startFlow=()=>{t(e=>({...e,currentRound:1,elapsedSeconds:0})),buildQueue(e.targetRounds),clearTimer();let r=setInterval(()=>{t(e=>{let t=e.elapsedSeconds+1,r="work"===e.phase?60*e.currentRound:60,s=t-e.phaseStartElapsed,n=Math.max(0,r-s);if(0===n){if("work"===e.phase)return{...e,elapsedSeconds:t,phase:"rest",secondsLeft:60,phaseStartElapsed:t};if("rest"===e.phase){if(popTopRow(),e.currentRound>=e.targetRounds)return complete(),{...e,elapsedSeconds:t,phase:"done",secondsLeft:0};{let r=e.currentRound+1;return{...e,elapsedSeconds:t,currentRound:r,phase:"work",secondsLeft:60*r,phaseStartElapsed:t}}}}return{...e,elapsedSeconds:t,secondsLeft:n}})},1e3);d(r),beginWork()},handleStart=()=>{"idle"===e.phase||"done"===e.phase?startFlow():reset()};return(0,s.jsxs)("div",{className:"min-h-screen bg-background p-7",children:[(0,s.jsxs)("main",{className:"max-w-3xl mx-auto bg-card border rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("div",{className:"font-bold text-lg font-mono",children:"LADDERBATA"}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:"idle"===e.phase||"done"===e.phase?(0,s.jsx)(RoundSelectionDrawer,{currentRounds:e.targetRounds,onRoundsChange:e=>{t(t=>({...t,targetRounds:e}))},onStart:handleStart}):(0,s.jsx)(i,{onClick:handleStart,variant:"outline",className:"font-mono",children:"Reset"})})]}),(0,s.jsx)("h1",{className:"text-5xl font-bold text-center mb-2 font-mono ".concat((()=>{switch(e.phase){case"work":default:return"text-green-600";case"rest":return"text-red-500";case"done":return"text-gray-900"}})()),children:(()=>{switch(e.phase){case"idle":default:return"READY";case"work":return"WORK";case"rest":return"REST";case"done":return"COMPLETED"}})()}),(0,s.jsxs)("div",{className:"text-center space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"font-bold font-mono",children:["ROUND: ","idle"===e.phase?"–":e.currentRound," OF ",e.targetRounds||"–"]}),(0,s.jsxs)("div",{className:"font-bold font-mono",children:["CURRENT ROUND: ","idle"===e.phase?"–":e.currentRound," MINUTES OF WORK"]}),(0,s.jsxs)("div",{className:"text-muted-foreground font-bold font-mono",children:["NEXT ROUND: ","idle"===e.phase||e.currentRound>=e.targetRounds?"–":e.currentRound+1," MINUTES OF WORK"]}),(0,s.jsx)("div",{className:"text-muted-foreground font-mono text-6xl mt-2 tabular-nums",children:(e=>{let t=Math.floor(e/60).toString().padStart(2,"0"),r=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)})(e.secondsLeft)})]}),(0,s.jsxs)("div",{className:"text-center text-xl font-mono",children:["TOTAL ELAPSED: ",(0,s.jsx)("span",{className:"text-2xl",children:(e=>{let t=Math.floor(e/3600).toString().padStart(2,"0"),r=Math.floor(e%3600/60).toString().padStart(2,"0"),s=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r,":").concat(s)})(e.elapsedSeconds)})]})]}),r.length>0&&(0,s.jsx)("section",{className:"max-w-3xl mx-auto mt-6",children:(0,s.jsx)("div",{className:"bg-card border rounded-xl overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-muted/50",children:[(0,s.jsx)("th",{className:"text-left p-3 font-bold",children:"Round"}),(0,s.jsx)("th",{className:"text-left p-3 font-bold",children:"Work Start"}),(0,s.jsx)("th",{className:"text-left p-3 font-bold",children:"Rest Start"}),(0,s.jsx)("th",{className:"text-left p-3 font-bold",children:"Work Minutes"}),(0,s.jsx)("th",{className:"text-left p-3 font-bold",children:"Elapsed Time on Completion"})]})}),(0,s.jsx)("tbody",{children:r.map((e,t)=>(0,s.jsxs)("tr",{className:0===t?"bg-green-50":"",children:[(0,s.jsx)("td",{className:"p-3 border-b border-border/50",children:e.round}),(0,s.jsx)("td",{className:"p-3 border-b border-border/50",children:e.workStart}),(0,s.jsx)("td",{className:"p-3 border-b border-border/50",children:e.restStart}),(0,s.jsx)("td",{className:"p-3 border-b border-border/50",children:e.workMinutes}),(0,s.jsx)("td",{className:"p-3 border-b border-border/50",children:e.completionTime})]},e.round))})]})})})]})}j.displayName=h.dy.Description.displayName}},function(e){e.O(0,[39,971,472,744],function(){return e(e.s=5949)}),_N_E=e.O()}]);