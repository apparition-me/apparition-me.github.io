(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5949:function(e,t,r){Promise.resolve().then(r.bind(r,3658))},3658:function(e,t,r){"use strict";r.r(t),r.d(t,{LadderbataTimer:function(){return LadderbataTimer}});var n=r(7437),s=r(2265),a=r(1424),o=r(4891),d=r(9883),l=r(7256),c=r(6061),i=r(7042),u=r(4769);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,u.m6)((0,i.W)(t))}let m=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=s.forwardRef((e,t)=>{let{className:r,variant:s,size:a,asChild:o=!1,...d}=e,c=o?l.g7:"button";return(0,n.jsx)(c,{className:cn(m({variant:s,size:a,className:r})),ref:t,...d})});h.displayName="Button";var x=r(9512);let Drawer=e=>{let{shouldScaleBackground:t=!0,...r}=e;return(0,n.jsx)(x.dy.Root,{shouldScaleBackground:t,...r})};Drawer.displayName="Drawer",x.dy.Trigger;let f=x.dy.Portal,p=x.dy.Close,b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(x.dy.Overlay,{ref:t,className:cn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",r),...s})});b.displayName=x.dy.Overlay.displayName;let g=s.forwardRef((e,t)=>{let{className:r,children:s,...a}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(b,{}),(0,n.jsxs)(x.dy.Content,{ref:t,className:cn("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background p-4",r),...a,children:[(0,n.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),s]})]})});g.displayName="DrawerContent";let DrawerHeader=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:cn("grid gap-1.5 p-4 text-center sm:text-left",t),...r})};DrawerHeader.displayName="DrawerHeader";let DrawerFooter=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:cn("mt-auto flex flex-col gap-2 p-4",t),...r})};DrawerFooter.displayName="DrawerFooter";let N=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(x.dy.Title,{ref:t,className:cn("text-lg font-semibold leading-none tracking-tight",r),...s})});N.displayName=x.dy.Title.displayName;let j=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(x.dy.Description,{ref:t,className:cn("text-sm text-muted-foreground",r),...s})});function RoundSelectionDrawer(e){let{currentRounds:t,onRoundsChange:r,onStart:a,onReset:l,isRunning:c=!1}=e,[i,u]=s.useState(t),[m,x]=s.useState(!0);function onClick(e){let t=Math.max(1,Math.min(20,i+e));u(t)}function handleSubmit(){console.log("Drawer handleSubmit called with rounds:",i),r(i),x(!1),a()}let f=(e=>{let t=0;for(let r=1;r<=e;r++){let e=r,n=t+e,s=n+1;t=s}return t})(i);return(0,n.jsx)(Drawer,{open:m,onOpenChange:()=>{},modal:!1,children:(0,n.jsx)(g,{children:(0,n.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,n.jsxs)(DrawerHeader,{children:[(0,n.jsx)(N,{children:"Round Selection"}),(0,n.jsx)(j,{children:"Set your workout rounds. Each round increases in work duration."})]}),(0,n.jsxs)("div",{className:"p-4 pb-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsxs)(h,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(-1),disabled:i<=1,children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Decrease"})]}),(0,n.jsxs)("div",{className:"flex-1 text-center",children:[(0,n.jsx)("div",{className:"text-7xl font-bold tracking-tighter font-mono",children:i}),(0,n.jsx)("div",{className:"text-muted-foreground text-[0.70rem] uppercase font-mono",children:"Rounds"})]}),(0,n.jsxs)(h,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:()=>onClick(1),disabled:i>=20,children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Increase"})]})]}),(0,n.jsxs)("div",{className:"mt-6 text-center",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground font-mono uppercase mb-1",children:"Total Workout Time"}),(0,n.jsxs)("div",{className:"text-3xl font-bold font-mono",children:[f," minutes"]})]})]}),(0,n.jsxs)(DrawerFooter,{children:[(0,n.jsx)(p,{asChild:!0,children:(0,n.jsx)(h,{onClick:handleSubmit,className:"font-mono",children:"Start Timer"})}),c&&(0,n.jsx)(h,{onClick:()=>window.location.reload(),variant:"destructive",className:"font-mono",children:"Refresh Page"})]})]})})})}function LadderbataTimer(){let[e,t]=s.useState({targetRounds:8,currentRound:0,phase:"idle",secondsLeft:0,elapsedSeconds:0,phaseStartElapsed:0}),[r,o]=s.useState([]),[d,l]=s.useState(null),clearTimer=()=>{d&&(clearInterval(d),l(null))},buildQueue=e=>{console.log("buildQueue called with total:",e);let t=[],r=0;for(let n=1;n<=e;n++){let e=r,s=n,a=r+s,o=a+1;t.push({round:n,workStart:e,restStart:a,workMinutes:s,completionTime:o}),r=o}console.log("buildQueue created newQueue with length:",t.length),o(t)},reset=()=>{window.location.reload()},beginWork=()=>{let r=e.currentRound;t(e=>({...e,phase:"work",secondsLeft:60*r,phaseStartElapsed:e.elapsedSeconds})),a.Am.success("Work Round Started",{description:"Round ".concat(e.currentRound," - ").concat(r," minutes of work")})},complete=()=>{clearTimer(),t(e=>({...e,phase:"done",secondsLeft:0})),o([])},startFlow=()=>{console.log("startFlow called with state.targetRounds:",e.targetRounds),t(e=>({...e,currentRound:1,elapsedSeconds:0})),buildQueue(e.targetRounds),clearTimer();let r=setInterval(()=>{t(e=>{let t=e.elapsedSeconds+1,r="work"===e.phase?60*e.currentRound:60,n=t-e.phaseStartElapsed,s=Math.max(0,r-n);if(0===s){if("work"===e.phase)return{...e,elapsedSeconds:t,phase:"rest",secondsLeft:60,phaseStartElapsed:t};if("rest"===e.phase){if(e.currentRound>=e.targetRounds)return complete(),{...e,elapsedSeconds:t,phase:"done",secondsLeft:0};{let r=e.currentRound+1;return{...e,elapsedSeconds:t,currentRound:r,phase:"work",secondsLeft:60*r,phaseStartElapsed:t}}}}return{...e,elapsedSeconds:t,secondsLeft:s}})},1e3);l(r),beginWork()};return(0,n.jsxs)("div",{className:"min-h-screen bg-background p-7",children:[(0,n.jsx)(RoundSelectionDrawer,{currentRounds:e.targetRounds,onRoundsChange:e=>{console.log("handleRoundsChange called with rounds:",e),t(t=>({...t,targetRounds:e}))},onStart:()=>{"idle"===e.phase||"done"===e.phase?startFlow():reset()},onReset:reset,isRunning:"work"===e.phase||"rest"===e.phase}),"idle"!==e.phase&&"done"!==e.phase&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("main",{className:"max-w-3xl mx-auto bg-card border rounded-2xl shadow-lg p-6",children:[(0,n.jsx)("header",{className:"flex items-center justify-between mb-6",children:(0,n.jsx)("div",{className:"font-bold text-lg font-mono",children:"LADDERBATA"})}),(0,n.jsx)("h1",{className:"text-5xl font-bold text-center mb-2 font-mono ".concat((()=>{switch(e.phase){case"work":default:return"text-green-600";case"rest":return"text-red-500";case"done":return"text-gray-900"}})()),children:(()=>{switch(e.phase){case"idle":default:return"READY";case"work":return"WORK";case"rest":return"REST";case"done":return"COMPLETED"}})()}),(0,n.jsxs)("div",{className:"text-center space-y-2 mb-4",children:[(0,n.jsxs)("div",{className:"font-bold font-mono",children:["ROUND: ",e.currentRound," OF ",e.targetRounds]}),(0,n.jsxs)("div",{className:"font-bold font-mono",children:["CURRENT ROUND: ",e.currentRound," MINUTES OF WORK"]}),(0,n.jsxs)("div",{className:"text-muted-foreground font-bold font-mono",children:["NEXT ROUND: ",e.currentRound>=e.targetRounds?"â€“":e.currentRound+1," MINUTES OF WORK"]}),(0,n.jsx)("div",{className:"text-muted-foreground font-mono text-6xl mt-2 tabular-nums",children:(e=>{let t=Math.floor(e/60).toString().padStart(2,"0"),r=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)})(e.secondsLeft)})]}),(0,n.jsxs)("div",{className:"text-center text-xl font-mono",children:["TOTAL ELAPSED: ",(0,n.jsx)("span",{className:"text-2xl",children:(e=>{let t=Math.floor(e/3600).toString().padStart(2,"0"),r=Math.floor(e%3600/60).toString().padStart(2,"0"),n=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r,":").concat(n)})(e.elapsedSeconds)})]})]}),e.targetRounds>0&&(0,n.jsx)("section",{className:"max-w-3xl mx-auto mt-6",children:(0,n.jsx)("div",{className:"bg-card border rounded-xl",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"bg-muted/50",children:[(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"ROUND"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"WORK START"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"REST START"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"WORK MINUTES"}),(0,n.jsx)("th",{className:"text-left p-3 font-bold",children:"ELAPSED TIME ON COMPLETION"})]})}),(0,n.jsx)("tbody",{children:(e=>{let t=[],r=0;for(let n=1;n<=e;n++){let e=r,s=n,a=r+s,o=a+1;t.push({round:n,workStart:e,restStart:a,workMinutes:s,elapsedTimeOnCompletion:o}),r=o}return t})(e.targetRounds).map((t,r)=>(0,n.jsxs)("tr",{className:0===r&&e.currentRound?"bg-green-50":"",children:[(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:t.round}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:t.workStart}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:t.restStart}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:t.workMinutes}),(0,n.jsx)("td",{className:"p-3 border-b border-border/50",children:t.elapsedTimeOnCompletion})]},t.round))})]})})})]})]})}j.displayName=x.dy.Description.displayName}},function(e){e.O(0,[409,39,971,472,744],function(){return e(e.s=5949)}),_N_E=e.O()}]);